## automake - create Makefile.in from Makefile.am
## Copyright 2004 Council for the Central Laboratories of the Research Councils

## This program is free software; you can redistribute it and/or modify
## it under the terms of the GNU General Public License as published by
## the Free Software Foundation; either version 2, or (at your option)
## any later version.

## This program is distributed in the hope that it will be useful,
## but WITHOUT ANY WARRANTY; without even the implied warranty of
## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
## GNU General Public License for more details.

## You should have received a copy of the GNU General Public License
## along with this program; if not, write to the Free Software
## Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
## 02111-1307, USA.


## This file contains material ADDITIONAL to FSF automake, for
## supporting the Starlink build system.

if %?LATEXDOCS%
# Templates to generate documentation
.tex.dvi:
	latex $<; latex $<
.dvi.ps:
	dvips -o $@ $<
# Don't express a dependency via the directory .htx, or else Make
# tries to delete it as an intermediate.  An alternative is to use
# .PRECIOUS, but that's not completely straightforward to arrange.
# Requires that the STAR2HTML substitution was made in
# configure.ac, probably implicitly by the STAR_LATEX_DOCUMENTATION macro.
#
# We do not require that star2html be available on the build system,
# and so we distribute built HTX documentation.  Thus the following rules
# should be active only in the predist state.
@PREDIST@.tex.htx_tar:
@PREDIST@	- @STAR2HTML@ $<
@PREDIST@	tar cf $@ ${<:.tex=.htx}
endif %?LATEXDOCS%

if %?COMPIFL%
# Compile IFL files.  Requires that the COMPIFL substitution was made in
# configure.ac, probably implicitly by the STAR_MONOLITHS macro.
.ifl.ifc:
	@COMPIFL@ $<
endif %?COMPIFL%

if %?VERSIONDAT%
# Create the version.dat file.  This is installed in the binaries directory,
# only because we saw STAR_DEFAULTS(per-package-dir) in the configure.ac.
# This is installed as a result of being included in the bin_DATA variable.
version.dat: configure.ac
	rm -f version.dat
	echo $(PACKAGE_VERSION) >version.dat
endif %?VERSIONDAT%
